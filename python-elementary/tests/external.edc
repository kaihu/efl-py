
images {
    image: "under.png" COMP;
    image: "sky.jpg" LOSSY 80;
    image: "clo.png" LOSSY 60;
}

externals {
   external: "elm";
}

collections {
    group { name: "external_test";

        parts {
            part { name: "clip";
                type: RECT;
                description { state: "default" 0.0;
                    min: 480 600;
                }
            }
            part { name: "sky";
                mouse_events: 1;
                clip_to: "clip";
                description { state: "default" 0.0;
                    aspect: 2.6225 2.6225;
                    aspect_preference: NONE;
                    image.normal: "sky.jpg";
                }
                description { state: "drift" 0.0;
                   inherit: "default" 0.0;
                   fill {
                      origin {
                         relative: 1.0 0.0;
                         offset: 0 0;
                      }
                   }
                }
            }
            part { name: "under";
                mouse_events: 0;
                clip_to: "clip";
                description { state: "default" 0.0;
                    align: 0.5 0.0;
                    aspect: 1.486068111 1.486068111;
                    aspect_preference: HORIZONTAL;
                    image.normal: "under.png";
                }
            }
            // External button
            part { name: "ext_button";
                type: EXTERNAL;
                source: "elm/button";
                clip_to: "clip";
                description { state: "default" 0.0;
                    max: 200 50;
                    align: 0.5 0.0;
                    params {
                        string: "label" "click me to animate the icon";
                        string: "icon" "home";
                    }
                }
            }
            // External icon
            part { name: "ext_icon";
                type: EXTERNAL;
                source: "elm/icon";
                clip_to: "clip";
                mouse_events: 0;
                description { state: "default" 0.0;
                    max: 50 50;
                    align: 0.8 0.0;
                    // align: 0.2 0.0;
                    params {
                        string: "icon" "home";
                    }
                }
                description { state: "left" 0.0;
                    inherit: "default" 0.0;
                    align: 0.2 0.0;
                }
            }
            // External clock
            part { name: "ext_clock";
                type: EXTERNAL;
                source: "elm/clock";
                clip_to: "clip";
                description { state: "default" 0.0;
                    max: 200 50;
                    align: 0.5 0.1;
                    params {
                        string: "label" "progressbar";
                        bool: "show seconds" "1";
                    }
                }
            }
            // External frame
            part { name: "ext_frame";
                type: EXTERNAL;
                source: "elm/frame";
                clip_to: "clip";
                description { state: "default" 0.0;
                    max: 300 50;
                    align: 0.5 0.2;
                    params {
                        string: "label" "External Frame (clock control)";
                    }
                }
            }
            // External checks
            part { name: "ext_check1";
                type: EXTERNAL;
                source: "elm/check";
                clip_to: "clip";
                description { state: "default" 0.0;
                    max: 200 70;
                    align: 0.4 0.2;
                    params {
                        string: "label" "editable";
                    }
                }
            }
            part { name: "ext_check2";
                type: EXTERNAL;
                source: "elm/check";
                clip_to: "clip";
                description { state: "default" 0.0;
                    max: 200 70;
                    align: 0.7 0.2;
                    params {
                        string: "label" "Show seconds";
                        bool: "state" "1";
                    }
                }
            }
            // external video
            part { name: "videobg";
                type: RECT;
                clip_to: "clip";
                description { state: "default" 0.0;
                    min: 200 180;
                    max: 200 180;
                    align: 0.5 0.4;
                    color: 0 0 0 255;
                }
            }
            part { name: "ext_button_play";
                type: EXTERNAL;
                source: "elm/button";
                clip_to: "clip";
                description { state: "default" 0.0;
                    min: 50 50;
                    max: 50 50;
                    align: 0.1 0.3;
                    params {
                        string: "label" "play";
                    }
                }
            }
            part { name: "ext_button_pause";
                type: EXTERNAL;
                source: "elm/button";
                clip_to: "clip";
                description { state: "default" 0.0;
                    min: 50 50;
                    max: 50 50;
                    align: 0.1 0.4;
                    params {
                        string: "label" "pause";
                    }
                }
            }
            
            part { name: "ext_button_stop";
                type: EXTERNAL;
                source: "elm/button";
                clip_to: "clip";
                description { state: "default" 0.0;
                    min: 50 50;
                    max: 50 50;
                    align: 0.1 0.5;
                    params {
                        string: "label" "stop";
                    }
                }
            }
            part { name: "ext_video";
                type: EXTERNAL;
                source: "elm/video";
                clip_to: "clip";
                description { state: "default" 0.0;
                    min: 200 180;
                    max: 200 180;
                    align: 0.5 0.4;
                    params {
                        string: "uri" "http://www.archive.org/download/TheMakingOfSuzanneVegasSecondLifeGuitar/3-TheMakingOfSuzanneVega_sSecondLifeGuitar.mp4";
                        bool: "play" "1";
                    }
                }
            }
            // External entry
            part { name: "ext_entry";
                type: EXTERNAL;
                source: "elm/entry";
                clip_to: "clip";
                description { state: "default" 0.0;
                    max: 200 50;
                    align: 0.5 0.7;
                    params {
                        string: "entry" "<b>This is an editable text entry</><br> (text will be copyed to the label behind)";
                    }
                }
            }
            // External label
            part { name: "ext_label";
                type: EXTERNAL;
                source: "elm/label";
                clip_to: "clip";
                description { state: "default" 0.0;
                    max: 200 50;
                    align: 0.5 0.8;
                    params {
                        string: "label" "<b>asd asd asd asd </>";
                    }
                }
            }
            // External slider
            part { name: "ext_slider";
                type: EXTERNAL;
                source: "elm/slider";
                clip_to: "clip";
                description { state: "default" 0.0;
                    max: 350 50;
                    align: 0.5 0.9;
                    params {
                        string: "label" "slide me";
                    }
                }
            }
            // External progressbar
            part { name: "ext_progressbar";
                type: EXTERNAL;
                source: "elm/progressbar";
                clip_to: "clip";
                description { state: "default" 0.0;
                    max: 50 400;
                    align: 0.95 1.0;
                    params {
                        string: "label" "progressbar";
                        bool: "horizontal" "0";
                        bool: "inverted" "1";
                    }
                }
            }
            //
            part { name: "clo";
                mouse_events: 0;
                clip_to: "clip";
                description { state: "default" 0.0;
                    fill {
                        smooth: 0;
                        origin {
                            relative: 0.0 0.0;
                            offset: 0 0;
                        }
                        size {
                            relative: 1.84722 1.0;
                            offset: 0 0;
                        }
                    }
                    image.normal: "clo.png";
                }
                description { state: "drift" 0.0;
                    inherit: "default" 0.0;
                    fill {
                        origin {
                            relative: 1.84722 0.0;
                            offset: 0 0;
                        }
                        size {
                            relative: 1.84722 1.0;
                            offset: 0 0;
                        }
                    }
                }
            }
        }
        programs {
            // toggle icon position on button press
            program { name: "test1";
                signal: "clicked";
                filter: "ext_icon" "default";
                source: "ext_button";
                action: STATE_SET "left" 0.0;
                transition: SINUSOIDAL 0.6;
                target: "ext_icon";
            }
            program { name: "test2";
                signal: "clicked";
                filter: "ext_icon" "left";
                source: "ext_button";
                action: STATE_SET "default" 0.0;
                transition: SINUSOIDAL 0.6;
                target: "ext_icon";
            }
            // first check toggle clock editability
            program { name: "test3";
                signal: "changed";
                source: "ext_check1";
                action: PARAM_COPY "ext_check1" "state" "ext_clock" "editable";
            }
            // second check toggle clock seconds visibility
            program { name: "test4";
                signal: "changed";
                source: "ext_check2";
                action: PARAM_COPY "ext_check2" "state" "ext_clock" "show seconds";
            }
            // entry text copyed to label
            program { name: "test5";
                signal: "changed";
                source: "ext_entry";
                action: PARAM_COPY "ext_entry" "entry" "ext_label" "label";
            }
            // slider will change progressbar
            program { name: "test6";
                signal: "changed";
                source: "ext_slider";
                action: PARAM_COPY "ext_slider" "value" "ext_progressbar" "value";
            }
            // video controls
            program { name: "test7";
                signal: "clicked";
                source: "ext_button_pause";
                action: PARAM_SET "ext_video" "pause" "1";
            }
            program { name: "test8";
                signal: "clicked";
                source: "ext_button_play";
                action: PARAM_SET "ext_video" "play" "1";
            }
            program { name: "test9";
                signal: "clicked";
                source: "ext_button_stop";
                action: PARAM_SET "ext_video" "stop" "1";
            }
            // layered animation
            program { name: "anim1";
                signal: "load";
                source: "";
                action: STATE_SET "drift" 0.0;
                transition: LINEAR 10.0;
                target: "clo";
                after: "anim2";
            }
            program { name: "anim2";
                action: STATE_SET "default" 0.0;
                target: "clo";
                after: "anim1";
            }
            program { name: "anim3";
                signal: "load";
                source: "";
                action: STATE_SET "drift" 0.0;
                transition: LINEAR 40.0;
                target: "sky";
                after: "anim4";
            }
            program { name: "anim4";
                action: STATE_SET "default" 0.0;
                target: "sky";
                after: "anim3";
            }
        }
    }
}
